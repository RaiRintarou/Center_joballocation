# ジョブアロケーション最適化デモ - 使用方法ガイド

## 概要

このシステムは、オペレーターとタスクのマッチングを最適化するためのデモアプリケーションです。複数のアルゴリズムを使用してジョブアロケーションの最適解を見つけることができます。

## データファイルの準備

### 1. オペレーターデータ (sample_operators.csv)

オペレーターの情報を含むCSVファイルです。

**形式:**
```csv
operator_id,name,skill_set,available_hours
OP001,田中太郎,"[""SKILL001"", ""SKILL002""]","[""09:00"", ""17:00""]"
```

**項目説明:**
- `operator_id`: オペレーターの一意識別子
- `name`: オペレーター名
- `skill_set`: 保有スキルのリスト（JSON形式、スキルIDを使用）
- `available_hours`: 勤務可能時間帯（開始時間と終了時間）

### 2. タスクデータ (sample_tasks.csv)

実行すべきタスクの情報を含むCSVファイルです。

**形式:**
```csv
task_id,task_name,required_skills,estimated_hours,priority,deadline
TASK001,Webアプリケーション開発,"[""SKILL007""]",8,high,2024-01-15
```

**項目説明:**
- `task_id`: タスクの一意識別子
- `task_name`: タスク名
- `required_skills`: 必要スキル（JSON形式、スキルIDを使用）
- `estimated_hours`: 予想工数（時間）
- `priority`: 優先度（high/medium/low）
- `deadline`: 納期（YYYY-MM-DD形式）

### 3. スキルマスター (skillset_master.csv)

システムで使用するスキルの定義ファイルです。

**形式:**
```csv
skill_id,skill_name,category,description
SKILL001,Python,プログラミング言語,Pythonプログラミング言語
```

## アプリケーションの使用方法

### 1. 基本的な使用手順

1. **アプリケーション起動**
   ```bash
   poetry run streamlit run src/ui/app.py
   ```

2. **データファイルのアップロード**
   - サイドバーからオペレーターデータファイルをアップロード
   - タスクデータファイルをアップロード

3. **アルゴリズム選択**
   利用可能なアルゴリズム:
   - 線形計画法 (Linear Programming)
   - CP-SAT (Constraint Programming)
   - 遺伝的アルゴリズム (Genetic Algorithm)
   - ヒューリスティック法 (Heuristic)
   - Deferred Acceptance

4. **最適化実行**
   - 「最適化実行」ボタンをクリック
   - 結果の表示と分析

5. **結果の確認と出力**
   - スケジュールタイムライン表示
   - メトリクス比較
   - CSV/Excel形式での結果ダウンロード

### 2. 高度な機能

#### アルゴリズム比較
複数のアルゴリズムを同時に実行して結果を比較できます。

#### 可視化機能
- **タイムライン表示**: オペレーター別のタスク割り当てスケジュール
- **メトリクス比較**: 稼働率、割り当てタスク数などの指標比較
- **レーダーチャート**: 各アルゴリズムの性能比較

#### エクスポート機能
- CSV形式での結果出力
- Excel形式での詳細レポート
- JSON形式での構造化データ

## ファイル形式の注意事項

### CSVファイル
- 文字エンコーディング: UTF-8
- 区切り文字: カンマ(,)
- JSON形式の配列は二重引用符で囲む

### Excelファイル
- .xlsx形式に対応
- 最初のシートが読み込み対象

### 日付形式
- 納期: YYYY-MM-DD形式（例: 2024-01-15）
- 時間: HH:MM形式（例: 09:00）

## トラブルシューティング

### よくある問題

1. **ファイル読み込みエラー**
   - ファイル形式とエンコーディングを確認
   - 必須列が全て含まれているか確認

2. **最適化が完了しない**
   - データサイズを確認（大量データの場合は時間がかかります）
   - スキルマッチングが可能か確認

3. **結果が表示されない**
   - ブラウザの再読み込みを試行
   - データの妥当性を確認

### エラーメッセージ

- `スキルマッチングエラー`: 必要スキルを持つオペレーターが不足
- `時間制約エラー`: 勤務時間内でタスクが完了できない
- `データ形式エラー`: CSVの形式が正しくない

## サンプルデータの活用

提供されているサンプルデータ（`data/`フォルダ）を使用して、システムの動作を確認できます。

- `sample_operators.csv`: 10名のオペレーター情報
- `sample_tasks.csv`: 30個のタスク情報
- `skillset_master.csv`: スキル定義

これらのファイルをそのまま使用して、システムの基本機能を体験できます。