# ジョブアロケーション最適化デモ - 実装TODOリスト

## 1. 環境構築とセットアップ
- [x] Poetry依存関係の定義（pyproject.toml更新）
  - [x] pandas
  - [x] streamlit
  - [x] pulp（線形計画法）
  - [x] ortools（CP-SAT）
  - [x] deap（遺伝的アルゴリズム）
  - [x] matplotlib/plotly（可視化）
  - [x] openpyxl（Excel読み込み）
- [x] .gitignore の設定
- [x] 開発環境セットアップドキュメント作成

## 2. データモデル定義
- [x] オペレーターデータモデル定義
  - [x] オペレーターID
  - [x] 名前
  - [x] スキルセット
  - [x] 勤務可能時間帯
- [x] タスクデータモデル定義
  - [x] タスクID
  - [x] タスク名/種類
  - [x] 必要工数（整数時間）
  - [x] 納期/優先度（オプション）
- [x] スケジュール結果データモデル定義

## 3. データ読み込み機能（src/data/）
- [x] operator_loader.py 実装
  - [x] CSV読み込み機能
  - [x] Excel読み込み機能
  - [x] JSON読み込み機能
  - [x] データ形式の自動判定
- [x] task_loader.py 実装
  - [x] CSV読み込み機能
  - [x] Excel読み込み機能
  - [x] JSON読み込み機能
  - [x] データ形式の自動判定
- [x] validators.py 実装
  - [x] オペレーターデータ検証
  - [x] タスクデータ検証
  - [x] スキル名の統一性チェック
  - [x] エラーメッセージの定義

## 4. 最適化アルゴリズム実装（src/algorithms/）
- [x] base.py - 基底クラス実装
  - [x] 共通インターフェース定義
  - [x] 結果フォーマット統一
- [x] linear_programming.py - 線形計画法
  - [x] PuLPモデル構築
  - [x] 制約条件の定義
  - [x] 目的関数の定義
- [] cp_sat.py - CP-SAT実装
  - [] OR-Toolsモデル構築
  - [] 制約条件の定義
  - [] 最適化実行
- [] heuristic.py - ヒューリスティック法
  - [] 貪欲法実装
  - [] 改善アルゴリズム
- [] deferred_acceptance.py - DA実装
  - [] Gale-Shapleyアルゴリズム
  - [] 選好リストの生成

## 5. スケジューリング機能（src/utils/）
- [x] scheduler.py 実装
  - [x] アルゴリズム実行管理
  - [x] 結果の統一フォーマット変換
  - [x] 実行時間計測
- [x] metrics.py 実装
  - [x] 割り当てタスク総数計算
  - [x] 稼働率計算
  - [x] 空き時間計算
  - [x] 比較指標の集計
- [x] export.py 実装
  - [x] CSV出力
  - [x] Excel出力
  - [x] JSON出力

## 6. UI実装（src/ui/）
- [x] app.py - メインアプリケーション
  - [x] ページレイアウト設定
  - [x] サイドバー実装
  - [x] メインビュー実装
  - [x] セッション状態管理
- [x] components.py - UIコンポーネント
  - [x] ファイルアップローダー
  - [x] アルゴリズム選択UI
  - [x] 実行ボタン
  - [x] プログレスバー
  - [x] 結果ダウンロードボタン
- [x] visualization.py - 可視化機能
  - [x] スケジュールタイムライン図
    - [x] 縦軸：オペレーター
    - [x] 横軸：時間帯（9:00-17:00）
    - [x] タスクブロック表示
  - [x] 比較グラフ
    - [x] 棒グラフ（タスク数・稼働率）
    - [x] レーダーチャート
  - [x] データプレビューテーブル

## 7. テスト実装（tests/）
- [x] test_data_loaders.py
  - [x] 各種ファイル形式の読み込みテスト
  - [x] バリデーションテスト
  - [x] エラーケーステスト
- [x] test_algorithms.py
  - [x] 各アルゴリズムの動作テスト
  - [x] 結果の妥当性検証
  - [x] パフォーマンステスト
- [x] test_scheduler.py
  - [x] スケジューリング統合テスト
  - [x] メトリクス計算テスト

## 8. サンプルデータ作成（data/）
- [x] sample_operators.csv
  - [x] 10名程度のオペレーター情報
  - [x] 多様なスキルセット
- [x] skillset_master.csv 
  - [x] スキルセットの種類を定義するマスターリスト
- [x] sample_tasks.csv
  - [x] 20-30個のタスク
  - [x] 様々な工数（1-8時間）
- [x] 使用方法ドキュメント

## 9. メインエントリーポイント
- [x] main.py 実装
  - [x] Streamlitアプリ起動
  - [x] コマンドライン引数処理
  - [x] 設定ファイル読み込み

## 10. ドキュメント作成
- [x] README.md 更新
  - [x] プロジェクト概要
  - [x] インストール方法
  - [x] 使用方法
  - [x] アーキテクチャ説明
- [x] CLAUDE.md 更新
  - [x] 開発コマンド追加
  - [x] テスト実行方法
  - [x] アーキテクチャ詳細

## 11. CI/CD設定（オプション）
- [ ] Dockerfile作成
- [ ] docker-compose.yml作成
- [ ] GitHub Actions設定
  - [ ] 自動テスト
  - [ ] リンター実行
  - [ ] デプロイ設定

## 実装優先順位
1. 環境構築とデータモデル定義
2. データ読み込み機能
3. 基本的なアルゴリズム実装（線形計画法から）
4. UI基本機能
5. 可視化機能
6. 他のアルゴリズム実装
7. テスト・ドキュメント整備