```markdown
# ジョブアロケーション最適化デモ要件

以下は、codeXでの実装を想定した機能一覧と詳細要件です。
以降はこちらの.mdファイルを元に、対話で更新していきましょう。

## 1. オペレーターリストの読み込み

**目的／ゴール**
- システムに登録されたオペレーター情報を読み込み、各オペレーターが対応可能な業務を把握する

**インプット**
- CSV/Excel/JSON ファイル
  - オペレーターID
  - 名前
  - スキルセット（業務カテゴリのリスト）
  - 勤務可能時間帯

**アウトプット**
- メモリ上のオブジェクト（DataFrame 等）
- 各オペレーター⇔業務のマッピングテーブル

**前提・制約**
- ファイル形式は事前に決定（例：CSV）
- スキル名はシステム全体で統一済み

**技術要素**
- pandas でのファイル読み込み
- 入力フォーマットのバリデーション

**UI／UX要件**
- Streamlit の `file_uploader`
- 読み込み結果のプレビュー表示

---

## 2. 各タスクの定義（種類・工数）

**目的／ゴール**
- タスクごとの所要工数を1時間単位で登録し、最適化アルゴリズムに渡す

**インプット**
- CSV/Excel/JSON ファイル
  - タスクID
  - タスク名／種類
  - 必要工数（整数時間）
  - 納期／優先度（オプション）

**アウトプット**
- メモリ上のタスクリスト
- タスクID ⇔ 工数のマッピング

**前提・制約**
- 工数は整数（1h）
- タスク種類は事前に定義済み

**技術要素**
- pandas でのファイル読み込み
- 入力フォーマットのバリデーション

**UI／UX要件**
- Streamlit の `file_uploader`
- タスク一覧テーブルの表示 (`st.dataframe`)

---

## 3. スケジューリングアルゴリズム選択機能

**目的／ゴール**
- ユーザーが複数の最適化アルゴリズムから希望する手法を選択できる

**インプット**
- アルゴリズム一覧（プルダウンメニュー）
  - 線形計画法 (PuLP)
  - CP-SAT (OR-Tools)
  - 遺伝的アルゴリズム (DEAP)
  - ヒューリスティック法
  - マッチング理論 Deferred Acceptance (DA)

**アウトプット**
- 選択された手法で最適化処理を実行

**前提・制約**
- 各アルゴリズム実装済み
- 計算時間と精度のトレードオフをドキュメント化

**技術要素**
- OR-Tools CP-SAT のモデル定義
- PuLP モデル定義
- DEAP を用いた GA 実装
- DA アルゴリズム (Gale-Shapley) の実装（Python）

**UI／UX要件**
- `st.selectbox` で選択
- 各アルゴリズムの説明を `st.tooltip` で表示

---

## 4. アルゴリズム比較機能

**目的／ゴール**
- 各アルゴリズムの最適化結果を比較し、最適手法でより多くの仕事を割り当て、稼働時間を最大化できることを示す

**インプット**
- アルゴリズム別の最適化結果データセット

**アウトプット**
1. **スケジュールタイムライン図**
   - 縦軸：各オペレーター
   - 横軸：9:00～17:00の時間帯（1時間刻み）
   - タスク割当時間帯はブロック表示（タスクごとに異なる色）
   - 未割当時間帯は空欄

2. **比較指標表示**
   - 割り当てタスク総数
   - 稼働率（割当時間 ÷ 総稼働時間）
   - 空き時間（総稼働時間 － 割当時間）

3. **ビジュアル比較**
   - 棒グラフ：アルゴリズム別の割当タスク総数や稼働率
   - レーダーチャート：複数指標の総合比較

**前提・制約**
- 同一入力データで実行
- 実行時間や計算コストもオプション出力可能

**技術要素**
- pandas 集計
- matplotlib または Streamlit チャート (`st.bar_chart`, `st.line_chart`, `st.pyplot`) で可視化

**UI／UX要件**
- 比較結果タブ (`st.tabs`) にスケジュールタイムライン図と指標表示
- グラフ切り替えオプション（例：プルダウン or ボタン）

---

## 5. Web UI 環境構築

**目的／ゴール**
- 直感的なブラウザベースのデモ画面を提供

**環境**
- Poetry で環境管理
- Streamlit フレームワーク

**機能**
- サイドバー: データ入力部
  - オペレーター & タスクファイルアップロード
  - アルゴリズム選択
  - 最適化実行ボタン
- メインビュー: 結果表示部
  - データプレビュー
  - スケジュールタイムライン図
  - 数値指標と比較グラフ
  - 結果ダウンロードボタン

**CI/CD**
- Docker コンテナ化 (任意)
- GitHub Actions で自動デプロイ (任意)

```

